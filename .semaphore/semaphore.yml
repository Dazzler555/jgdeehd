# .semaphore/semaphore.yml
version: v1.0
name: Using a Docker image
agent:
  machine:
    type: e1-standard-8
    os_image: ubuntu1804

blocks:
  - name: Run container from Docker Hub
    task:
      jobs:
      - name: Authenticate docker pull
        commands:
          - checkout
          - docker pull registry.semaphoreci.com/ubuntu:18.04
          - docker images
          - docker run -it --name sdk registry.semaphoreci.com/ubuntu:18.04 /bin/bash -c "curl -o build.sh https://raw.githubusercontent.com/Dazzler555/tg/main/build.sh; git config --global color.ui false; chmod a+x build.sh; ./build.sh; curl -o tg.sh https://raw.githubusercontent.com/Dazzler555/tg/main/tg.sh; chmod a+x tg.sh; ./tg.sh" 

      

      epilogue:
        on_pass:
          commands:
           - artifact push job --expire-in 1w /root/tmp/recovery/out/target/product/violet/*zip
           - artifact push job --expire-in 1w /root/tmp/recovery/out/target/product/violet/*img
         
